//---------------------------------------------------------------------
// This file is automatically generated. All manual edits will be lost.
//---------------------------------------------------------------------
// Real implementation of LibraryInterface for NI-FPGA
//---------------------------------------------------------------------
#ifndef NIFPGA_GRPC_LIBRARY_H
#define NIFPGA_GRPC_LIBRARY_H

#include "nifpga_library_interface.h"

#include <server/shared_library_interface.h>

#include <memory>

namespace nifpga_grpc {

class nifpgaLibrary : public nifpga_grpc::nifpgaLibraryInterface {
 public:
  nifpgaLibrary();
  explicit nifpgaLibrary(std::shared_ptr<nidevice_grpc::SharedLibraryInterface> shared_library);
  virtual ~nifpgaLibrary();

  ::grpc::Status check_function_exists(std::string functionName);
  NiFpga_Status Abort(NiFpga_Session session) override;
  NiFpga_Status Close(NiFpga_Session session, uint32_t attribute) override;
  NiFpga_Status Download(NiFpga_Session session) override;
  NiFpga_Status Open(const char bitfile[], const char signature[], const char resource[], uint32_t attribute, NiFpga_Session* session) override;
  NiFpga_Status Reset(NiFpga_Session session) override;
  NiFpga_Status Run(NiFpga_Session session, uint32_t attribute) override;

 private:
  using AbortPtr = decltype(&NiFpga_Abort);
  using ClosePtr = decltype(&NiFpga_Close);
  using DownloadPtr = decltype(&NiFpga_Download);
  using OpenPtr = decltype(&NiFpga_Open);
  using ResetPtr = decltype(&NiFpga_Reset);
  using RunPtr = decltype(&NiFpga_Run);

  typedef struct FunctionPointers {
    AbortPtr Abort;
    ClosePtr Close;
    DownloadPtr Download;
    OpenPtr Open;
    ResetPtr Reset;
    RunPtr Run;
  } FunctionLoadStatus;

  std::shared_ptr<nidevice_grpc::SharedLibraryInterface> shared_library_;
  FunctionPointers function_pointers_;
};

}  // namespace nifpga_grpc

#endif  // NIFPGA_GRPC_LIBRARY_H
