
//---------------------------------------------------------------------
// This file is automatically generated. All manual edits will be lost.
//---------------------------------------------------------------------
// EXPERIMENTAL Client convenience wrapper for NI-RFMXSPECAN.
//---------------------------------------------------------------------
#include "nirfmxspecan_client.h"

#include <grpcpp/grpcpp.h>

#include <nirfmxspecan.grpc.pb.h>

#include <cstdint>
#include <memory>
#include <stdexcept>
#include <vector>

namespace nirfmxspecan_grpc::experimental::client {

CloseResponse
close(const StubPtr& stub, const nidevice_grpc::Session& instrument_handle, const simple_variant<Boolean, pb::int32>& force_destroy)
{
  ::grpc::ClientContext context;

  auto request = CloseRequest{};
  request.mutable_instrument_handle()->CopyFrom(instrument_handle);
  const auto force_destroy_ptr = force_destroy.get_if<Boolean>();
  const auto force_destroy_raw_ptr = force_destroy.get_if<pb::int32>();
  if (force_destroy_ptr) {
    request.set_force_destroy(*force_destroy_ptr);
  }
  else if (force_destroy_raw_ptr) {
    request.set_force_destroy_raw(*force_destroy_raw_ptr);
  }

  auto response = CloseResponse{};

  raise_if_error(
      stub->Close(&context, request, &response));

  return response;
}

GetErrorResponse
get_error(const StubPtr& stub, const nidevice_grpc::Session& instrument_handle)
{
  ::grpc::ClientContext context;

  auto request = GetErrorRequest{};
  request.mutable_instrument_handle()->CopyFrom(instrument_handle);

  auto response = GetErrorResponse{};

  raise_if_error(
      stub->GetError(&context, request, &response));

  return response;
}

GetErrorStringResponse
get_error_string(const StubPtr& stub, const nidevice_grpc::Session& instrument_handle, const pb::int32& error_code)
{
  ::grpc::ClientContext context;

  auto request = GetErrorStringRequest{};
  request.mutable_instrument_handle()->CopyFrom(instrument_handle);
  request.set_error_code(error_code);

  auto response = GetErrorStringResponse{};

  raise_if_error(
      stub->GetErrorString(&context, request, &response));

  return response;
}

InitializeResponse
initialize(const StubPtr& stub, const pb::string& resource_name, const pb::string& option_string)
{
  ::grpc::ClientContext context;

  auto request = InitializeRequest{};
  request.set_resource_name(resource_name);
  request.set_option_string(option_string);

  auto response = InitializeResponse{};

  raise_if_error(
      stub->Initialize(&context, request, &response));

  return response;
}


} // namespace nirfmxspecan_grpc::experimental::client
